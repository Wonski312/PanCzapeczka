"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,r):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}function ownKeys(r,t){var e,o=Object.keys(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(r),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),o.push.apply(o,e)),o}function _objectSpread(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(e),!0).forEach(function(t){_defineProperty(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function _defineProperty(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var arraysToCheck=[hatsArr,scarfsArr],productsDiv=document.querySelectorAll(".products"),productsHats=document.querySelector(".hats"),productsScarfs=document.querySelector(".scarfs"),showMoreHats=document.querySelector(".show-moreBtn-hats"),showMoreScarfs=document.querySelector(".show-moreBtn-scarfs"),modalBtn=document.querySelector(".close-modal"),scrollcount=window.pageYOffset,hatsProducts=[],scarfsProducts=[],fetchingHats=function(){var t=new Headers;t.append("Content-Type","application/json"),fetch("https://panczapeczka-2393d-default-rtdb.europe-west1.firebasedatabase.app/hatsOpt.json",{method:"GET",headers:t,cors:"no-cors"}).then(function(t){return t.json()}).then(function(t){for(var r in t)hatsProducts.push(_objectSpread(_objectSpread({},t[r]),{},{id:r}));console.log(hatsProducts),show3atStart(hatsProducts),showWhichProduct(hatsProducts,productsHats)})},fetchingScarfs=function(){var t=new Headers;t.append("Content-Type","application/json"),fetch("https://panczapeczka-2393d-default-rtdb.europe-west1.firebasedatabase.app/scarfsOpt.json",{method:"GET",headers:t,cors:"no-cors"}).then(function(t){return t.json()}).then(function(t){for(var r in t)scarfsProducts.push(_objectSpread(_objectSpread({},t[r]),{},{id:r}));console.log(scarfsProducts),show3atStart(scarfsProducts),showWhichProduct(scarfsProducts,productsScarfs)})};function show3atStart(t){for(var r=0;r<=2;r++){var e=document.createElement("div");e.setAttribute("class","product"),e.innerHTML="\n\n\t\t\t<img src=".concat(t[r].imgurl," alt=").concat(t[r].alt,'>\n\t\t\t<div class="product__body">\n\t\t\t<h2 class="product__body-title">').concat(t[r].name,'</h2>\n\t\t<p class="product__body-description"><span class="product__body-price">').concat(t[r].price," zł</span>\n\t\t</p>\n\t\t</div>\n\n\t\t"),t==hatsProducts?productsHats.appendChild(e):t==scarfsProducts&&productsScarfs.appendChild(e)}}var handleshowMoreHats=function(){var t=hatsProducts.splice(0,3);hatsProducts.forEach(function(t){var r=document.createElement("div");r.setAttribute("class","product"),r.setAttribute("id","".concat(t.id)),r.innerHTML="\n\n\t\t<img src=".concat(t.imgurl," alt=").concat(t.alt,'>\n\t\t<div class="product__body">\n\t\t<h2 class="product__body-title">').concat(t.name,'</h2>\n    <p class="product__body-description"><span class="product__body-price">').concat(t.price," zł</span></p>\n\t</div>\n\n    "),productsHats.appendChild(r)}),showMoreHats.setAttribute("disabled",""),hatsProducts.push.apply(hatsProducts,_toConsumableArray(t)),showWhichProduct(hatsProducts,productsHats)},handleShowMoreScarfs=function(){var t=scarfsProducts.splice(0,3);scarfsProducts.forEach(function(t){var r=document.createElement("div");r.setAttribute("class","product"),r.setAttribute("id","".concat(t.id)),r.innerHTML="\n\n\t\t<img src=".concat(t.imgurl," alt=").concat(t.alt,'>\n\t\t<div class="product__body">\n\t\t<h2 class="product__body-title">').concat(t.name,'</h2>\n    <p class="product__body-description"><span class="product__body-price">').concat(t.price," zł</span></p>\n\t</div>\n\n    "),productsScarfs.appendChild(r)}),showMoreScarfs.setAttribute("disabled",""),scarfsProducts.push.apply(scarfsProducts,_toConsumableArray(t)),showWhichProduct(scarfsProducts,productsScarfs)};function showWhichProduct(e,t){var o=document.querySelector(".modal__box-title"),c=document.querySelector(".modal"),n=document.querySelector(".long-description"),s=document.querySelector(".modal-img"),a=document.querySelector(".product-price"),d=document.querySelector(".quantity-span");t.childNodes.forEach(function(t){return t.addEventListener("click",function(t){t=t.target.closest("div");c.style.display="flex",c.style.paddingTop="".concat(window.pageYOffset,"px");var r=t.querySelector(".product__body-title").textContent,t=e.findIndex(function(t){if(t.name==r)return!0});o.textContent=e[t].name,n.textContent=e[t].longDescription,d.textContent=e[t].quantity,a.textContent=e[t].price+"zł",s.setAttribute("src",e[t].imgurl)})})}fetchingHats(),fetchingScarfs(),showMoreHats.addEventListener("click",handleshowMoreHats),showMoreScarfs.addEventListener("click",handleShowMoreScarfs),modalBtn.addEventListener("click",function(){document.querySelector(".modal").style.display="none"}),show3atStart(hatsProducts),show3atStart(scarfsProducts),showWhichProduct(hatsProducts,productsHats),showWhichProduct(scarfsProducts,productsScarfs);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RzLXNjcmlwdC5qcyJdLCJuYW1lcyI6WyJhcnJheXNUb0NoZWNrIiwiaGF0c0FyciIsInNjYXJmc0FyciIsInByb2R1Y3RzRGl2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvZHVjdHNIYXRzIiwicXVlcnlTZWxlY3RvciIsInByb2R1Y3RzU2NhcmZzIiwic2hvd01vcmVIYXRzIiwic2hvd01vcmVTY2FyZnMiLCJtb2RhbEJ0biIsInNjcm9sbGNvdW50Iiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJoYXRzUHJvZHVjdHMiLCJzY2FyZnNQcm9kdWN0cyIsImZldGNoaW5nSGF0cyIsIkhlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJjb3JzIiwidGhlbiIsInVybCIsInJlcyIsImpzb24iLCJhcHBlbmQiLCJwdXNoIiwia2V5IiwiaWQiLCJzaG93M2F0U3RhcnQiLCJzaG93V2hpY2hQcm9kdWN0IiwiY29uc29sZSIsImZldGNoaW5nU2NhcmZzIiwibG9nIiwiaSIsInByb2R1Y3QiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY29uY2F0IiwiYWx0IiwiYXJyTmFtZSIsIm5hbWUiLCJwcmljZSIsImFwcGVuZENoaWxkIiwiaGFuZGxlc2hvd01vcmVIYXRzIiwic3BsaWNlIiwiaW5uZXJIVE1MIiwiaXRlbSIsImltZ3VybCIsImhhbmRsZVNob3dNb3JlU2NhcmZzIiwicmVtb3ZlZCIsInByb2R1Y3Rub2RlcyIsImZvckVhY2giLCJtb2RhbCIsIm1vZGFsTG9uZ0Rlc2NyaXB0aW9uIiwibW9kYWxJbWciLCJtb2RhbFByaWNlIiwiY2hpbGROb2RlcyIsImNsb3Nlc3QiLCJmb3VuZE9iaiIsImZpbmRJbmRleCIsImFwcGx5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwibW9kYWxUaXRsZSIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlTW9kYWwiLCJlIiwidGFyZ2V0Iiwic3R5bGUiLCJwYWRkaW5nVG9wIiwidGl0bGVTdHIiLCJzZWxlY3RlZFByb2R1Y3QiLCJsb25nRGVzY3JpcHRpb24iLCJpdGVtUXVhbnRpdHkiLCJxdWFudGl0eSIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJ1dERBR0EsSUFBTUEsY0FBZ0IsQ0FBQ0MsUUFBU0MsV0FFMUJDLFlBQWNDLFNBQVNDLGlCQUFpQixhQUV4Q0MsYUFBZUYsU0FBU0csY0FBYyxTQUN0Q0MsZUFBaUJKLFNBQVNHLGNBQWMsV0FFeENFLGFBQWVMLFNBQVNHLGNBQWMsc0JBQ3RDRyxlQUFpQk4sU0FBU0csY0FBYyx3QkFFeENJLFNBQVdQLFNBQVNHLGNBQWMsZ0JBRXBDSyxZQUFjQyxPQUFPQyxZQUVuQkMsYUFBZSxHQUNmQyxlQUFpQixHQWxCdkJDLGFBQUEsV0FLQSxJQUdNVCxFQUFBQSxJQUFjVSxRQUVwQkMsRUFBTVYsT0FBQUEsZUFBd0JGLG9CQUc5QmEsTUFOQSx5RkFNTVQsQ0FFTlUsT0FBSVQsTUFFSk8sUUFBTUosRUFDTk8sS0FBTU4sWUFJTE8sS0FBTUMsU0FBQUEsR0FBQUEsT0FDTkMsRUFBQUMsU0FDREgsS0FBTUosU0FBQUEsR0FDTkEsSUFBQUEsSUFBUVEsS0FBT0YsRUFFZkwsYUFBV1EsS0FBWFIsY0FBQUEsY0FBQUEsR0FBV0ssRUFBQUksSUFBWFQsR0FBQUEsQ0FBV1UsR0FBQUQsS0FFVlYsUUFBQUEsSUFBU0EsY0FGQ1ksYUFNSmhCLGNBQUFpQixpQkFBU2pCLGFBQVRULGlCQUc2QndCLGVBQUlELFdBQ3JDLElBQ0RJLEVBQVlsQixJQUFBQSxRQUVaZ0IsRUFBQUEsT0FBQUEsZUFBQSxvQkFFQVgsTUFNRCwyRkFyQkQsQ0FQQUMsT0FBQSxNQWtDQ0YsUUFBU0EsRUFUVkcsS0FBTVksWUFJTlgsS0FBTUosU0FBQUEsR0FBQUEsT0FBVU0sRUFBSVAsU0FDcEJDLEtBQUFBLFNBQUFBLEdBRUFDLElBQUssSUFBTVMsS0FBQUosRUFDVkosZUFEVU8sS0FDVlAsY0FBQUEsY0FBQUEsR0FEVUksRUFBQUksSUFDVlIsR0FBQUEs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ckRDLEVBQWFWLFlBQWN4QixFQUFRbUIsR0FBVWdCLFNBQzdDbkIsRUFBV1EsWUFBY3hCLEVBQVFtQixHQUFVakIsTUFBUSxLQUNuRGEsRUFBU2xCLGFBQWEsTUFBT0csRUFBUW1CLEdBQVVYLFlBS2xEakMsZUFDQWlCLGlCQUVBekIsYUFBYTBELGlCQUFpQixRQUFTckIsb0JBQ3ZDcEMsZUFBZXlELGlCQUFpQixRQUFTaEIsc0JBRXpDeEMsU0FBU3dELGlCQUFpQixRQUFTLFdBQ3BCL0QsU0FBU0csY0FBYyxVQUMvQmdFLE1BQU1PLFFBQVUsU0FJdkIvQyxhQUFhaEIsY0FDYmdCLGFBQWFmLGdCQUViZ0IsaUJBQWlCakIsYUFBY1QsY0FDL0IwQixpQkFBaUJoQixlQUFnQlIiLCJmaWxlIjoicHJvZHVjdHMtc2NyaXB0LW1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IHsgZGVmYXVsdDogYXhpb3MgfSA9IHJlcXVpcmUoXCJheGlvc1wiKTtcclxuXHJcblxyXG5jb25zdCBhcnJheXNUb0NoZWNrID0gW2hhdHNBcnIsIHNjYXJmc0Fycl07XHJcblxyXG5jb25zdCBwcm9kdWN0c0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdHNcIik7XHJcblxyXG5jb25zdCBwcm9kdWN0c0hhdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhhdHNcIik7XHJcbmNvbnN0IHByb2R1Y3RzU2NhcmZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY2FyZnNcIik7XHJcblxyXG5jb25zdCBzaG93TW9yZUhhdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNob3ctbW9yZUJ0bi1oYXRzXCIpO1xyXG5jb25zdCBzaG93TW9yZVNjYXJmcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hvdy1tb3JlQnRuLXNjYXJmc1wiKTtcclxuXHJcbmNvbnN0IG1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1tb2RhbFwiKTtcclxuXHJcbmxldCBzY3JvbGxjb3VudCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuXHJcbmNvbnN0IGhhdHNQcm9kdWN0cyA9IFtdO1xyXG5jb25zdCBzY2FyZnNQcm9kdWN0cyA9IFtdO1xyXG5cclxuY29uc3QgZmV0Y2hpbmdIYXRzID0gKCkgPT57XHJcblxyXG5cdGNvbnN0IHVybCA9XHJcblx0XCJodHRwczovL3BhbmN6YXBlY3prYS0yMzkzZC1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2hhdHNPcHQuanNvblwiO1xyXG5jb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcclxuaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG5cclxuZmV0Y2godXJsLCB7XHJcblx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdGhlYWRlcnM6IGhlYWRlcnMsXHJcblx0Y29yczogXCJuby1jb3JzXCIsXHJcblx0XHJcbn0pXHJcblx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuXHQudGhlbigocmVzKSA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IGtleSBpbiByZXMpIHtcclxuXHRcdFx0aGF0c1Byb2R1Y3RzLnB1c2goeyAuLi5yZXNba2V5XSwgaWQ6IGtleSB9KTtcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKGhhdHNQcm9kdWN0cyk7XHJcblx0XHRcclxuXHRcdHNob3czYXRTdGFydChoYXRzUHJvZHVjdHMpO1xyXG5cdFx0c2hvd1doaWNoUHJvZHVjdChoYXRzUHJvZHVjdHMscHJvZHVjdHNIYXRzKTtcclxuXHR9KTtcclxuXHJcbn1cclxuY29uc3QgZmV0Y2hpbmdTY2FyZnMgPSAoKSA9PntcclxuXHJcblx0Y29uc3QgdXJsID1cclxuXHRcImh0dHBzOi8vcGFuY3phcGVjemthLTIzOTNkLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvc2NhcmZzT3B0Lmpzb25cIjtcclxuY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XHJcbmhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuXHJcbmZldGNoKHVybCwge1xyXG5cdG1ldGhvZDogXCJHRVRcIixcclxuXHRoZWFkZXJzOiBoZWFkZXJzLFxyXG5cdGNvcnM6IFwibm8tY29yc1wiLFxyXG59KVxyXG5cdC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcblx0LnRoZW4oKHJlcykgPT4ge1xyXG5cdFx0Zm9yIChjb25zdCBrZXkgaW4gcmVzKSB7XHJcblx0XHRcdHNjYXJmc1Byb2R1Y3RzLnB1c2goeyAuLi5yZXNba2V5XSwgaWQ6IGtleSB9KTtcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKHNjYXJmc1Byb2R1Y3RzKTtcclxuXHJcblx0XHRzaG93M2F0U3RhcnQoc2NhcmZzUHJvZHVjdHMpO1xyXG5cdFx0c2hvd1doaWNoUHJvZHVjdChzY2FyZnNQcm9kdWN0cyxwcm9kdWN0c1NjYXJmcyk7XHJcblx0fSk7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBzaG93M2F0U3RhcnQoYXJyTmFtZSkge1xyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8PSAyOyBpKyspIHtcclxuXHRcdGxldCBwcm9kdWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdHByb2R1Y3Quc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwcm9kdWN0XCIpO1xyXG5cdFx0cHJvZHVjdC5pbm5lckhUTUwgPSBgXHJcblxyXG5cdFx0XHQ8aW1nIHNyYz0ke2Fyck5hbWVbaV0uaW1ndXJsfSBhbHQ9JHthcnJOYW1lW2ldLmFsdH0+XHJcblx0XHRcdDxkaXYgY2xhc3M9XCJwcm9kdWN0X19ib2R5XCI+XHJcblx0XHRcdDxoMiBjbGFzcz1cInByb2R1Y3RfX2JvZHktdGl0bGVcIj4ke2Fyck5hbWVbaV0ubmFtZX08L2gyPlxyXG5cdFx0PHAgY2xhc3M9XCJwcm9kdWN0X19ib2R5LWRlc2NyaXB0aW9uXCI+PHNwYW4gY2xhc3M9XCJwcm9kdWN0X19ib2R5LXByaWNlXCI+JHthcnJOYW1lW2ldLnByaWNlfSB6xYI8L3NwYW4+XHJcblx0XHQ8L3A+XHJcblx0XHQ8L2Rpdj5cclxuXHJcblx0XHRgO1xyXG5cdFx0aWYgKGFyck5hbWUgPT0gaGF0c1Byb2R1Y3RzKSB7XHJcblx0XHRcdHByb2R1Y3RzSGF0cy5hcHBlbmRDaGlsZChwcm9kdWN0KTtcclxuXHRcdH0gZWxzZSBpZiAoYXJyTmFtZSA9PSBzY2FyZnNQcm9kdWN0cykge1xyXG5cdFx0XHRwcm9kdWN0c1NjYXJmcy5hcHBlbmRDaGlsZChwcm9kdWN0KTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZXNob3dNb3JlSGF0cyA9ICgpID0+IHtcclxuXHRsZXQgcmVtb3ZlZCA9IFtdO1xyXG5cdHJlbW92ZWQgPSBoYXRzUHJvZHVjdHMuc3BsaWNlKDAsIDMpO1xyXG5cdGhhdHNQcm9kdWN0cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRsZXQgcHJvZHVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRwcm9kdWN0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicHJvZHVjdFwiKTtcclxuXHRcdHByb2R1Y3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgYCR7aXRlbS5pZH1gKTtcclxuXHRcdHByb2R1Y3QuaW5uZXJIVE1MID0gYFxyXG5cclxuXHRcdDxpbWcgc3JjPSR7aXRlbS5pbWd1cmx9IGFsdD0ke2l0ZW0uYWx0fT5cclxuXHRcdDxkaXYgY2xhc3M9XCJwcm9kdWN0X19ib2R5XCI+XHJcblx0XHQ8aDIgY2xhc3M9XCJwcm9kdWN0X19ib2R5LXRpdGxlXCI+JHtpdGVtLm5hbWV9PC9oMj5cclxuICAgIDxwIGNsYXNzPVwicHJvZHVjdF9fYm9keS1kZXNjcmlwdGlvblwiPjxzcGFuIGNsYXNzPVwicHJvZHVjdF9fYm9keS1wcmljZVwiPiR7aXRlbS5wcmljZX0gesWCPC9zcGFuPjwvcD5cclxuXHQ8L2Rpdj5cclxuXHJcbiAgICBgO1xyXG5cclxuXHRcdHByb2R1Y3RzSGF0cy5hcHBlbmRDaGlsZChwcm9kdWN0KTtcclxuXHR9KTtcclxuXHRzaG93TW9yZUhhdHMuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XHJcblxyXG5cdGhhdHNQcm9kdWN0cy5wdXNoKC4uLnJlbW92ZWQpO1xyXG5cdHNob3dXaGljaFByb2R1Y3QoaGF0c1Byb2R1Y3RzLCBwcm9kdWN0c0hhdHMpO1xyXG59O1xyXG5jb25zdCBoYW5kbGVTaG93TW9yZVNjYXJmcyA9ICgpID0+IHtcclxuXHRsZXQgcmVtb3ZlZCA9IFtdO1xyXG5cdHJlbW92ZWQgPSBzY2FyZnNQcm9kdWN0cy5zcGxpY2UoMCwgMyk7XHJcblx0c2NhcmZzUHJvZHVjdHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0bGV0IHByb2R1Y3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0cHJvZHVjdC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInByb2R1Y3RcIik7XHJcblx0XHRwcm9kdWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIGAke2l0ZW0uaWR9YCk7XHJcblx0XHRwcm9kdWN0LmlubmVySFRNTCA9IGBcclxuXHJcblx0XHQ8aW1nIHNyYz0ke2l0ZW0uaW1ndXJsfSBhbHQ9JHtpdGVtLmFsdH0+XHJcblx0XHQ8ZGl2IGNsYXNzPVwicHJvZHVjdF9fYm9keVwiPlxyXG5cdFx0PGgyIGNsYXNzPVwicHJvZHVjdF9fYm9keS10aXRsZVwiPiR7aXRlbS5uYW1lfTwvaDI+XHJcbiAgICA8cCBjbGFzcz1cInByb2R1Y3RfX2JvZHktZGVzY3JpcHRpb25cIj48c3BhbiBjbGFzcz1cInByb2R1Y3RfX2JvZHktcHJpY2VcIj4ke2l0ZW0ucHJpY2V9IHrFgjwvc3Bhbj48L3A+XHJcblx0PC9kaXY+XHJcblxyXG4gICAgYDtcclxuXHJcblx0XHRwcm9kdWN0c1NjYXJmcy5hcHBlbmRDaGlsZChwcm9kdWN0KTtcclxuXHR9KTtcclxuXHRzaG93TW9yZVNjYXJmcy5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcclxuXHJcblx0c2NhcmZzUHJvZHVjdHMucHVzaCguLi5yZW1vdmVkKTtcclxuXHRzaG93V2hpY2hQcm9kdWN0KHNjYXJmc1Byb2R1Y3RzLCBwcm9kdWN0c1NjYXJmcyk7XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gc2hvd1doaWNoUHJvZHVjdChhcnJOYW1lLCBwcm9kdWN0bm9kZXMpIHtcclxuXHJcblx0bGV0IG1vZGFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19ib3gtdGl0bGVcIik7XHJcblxyXG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcblxyXG5jb25zdCBtb2RhbExvbmdEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9uZy1kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgbW9kYWxJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWltZ1wiKTtcclxuY29uc3QgbW9kYWxQcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1wcmljZVwiKTtcclxuY29uc3QgaXRlbVF1YW50aXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdWFudGl0eS1zcGFuXCIpO1xyXG5cclxuXHJcblx0cHJvZHVjdG5vZGVzLmNoaWxkTm9kZXMuZm9yRWFjaCgoaXRlbSkgPT5cclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGVkUHJvZHVjdCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJkaXZcIik7XHJcblxyXG5cdFx0XHRtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbm1vZGFsLnN0eWxlLnBhZGRpbmdUb3AgPSBgJHt3aW5kb3cucGFnZVlPZmZzZXR9cHhgO1xyXG5cclxuXHRcdFx0Y29uc3QgdGhpc1Byb2R1Y3ROYW1lID0gc2VsZWN0ZWRQcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0XCIucHJvZHVjdF9fYm9keS10aXRsZVwiXHJcblx0XHRcdCk7XHJcblx0XHRcdGNvbnN0IHRpdGxlU3RyID0gdGhpc1Byb2R1Y3ROYW1lLnRleHRDb250ZW50O1xyXG5cclxuXHRcdFx0Ly8gZmluZCBpbmRleCBudW1iZXIgaW4gYXJyYXlcclxuXHRcdFx0bGV0IGZvdW5kT2JqID0gYXJyTmFtZS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHRcdFx0XHRpZiAoaXRlbS5uYW1lID09IHRpdGxlU3RyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IGFyck5hbWVbZm91bmRPYmpdLm5hbWU7XHJcblx0XHRcdG1vZGFsTG9uZ0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYXJyTmFtZVtmb3VuZE9ial0ubG9uZ0Rlc2NyaXB0aW9uO1xyXG5cdFx0XHRpdGVtUXVhbnRpdHkudGV4dENvbnRlbnQgPSBhcnJOYW1lW2ZvdW5kT2JqXS5xdWFudGl0eTtcclxuXHRcdFx0bW9kYWxQcmljZS50ZXh0Q29udGVudCA9IGFyck5hbWVbZm91bmRPYmpdLnByaWNlICsgJ3rFgidcclxuXHRcdFx0bW9kYWxJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGFyck5hbWVbZm91bmRPYmpdLmltZ3VybCk7XHJcblx0XHR9KVxyXG5cdCk7XHJcbn1cclxuXHJcbmZldGNoaW5nSGF0cygpO1xyXG5mZXRjaGluZ1NjYXJmcygpO1xyXG5cclxuc2hvd01vcmVIYXRzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVzaG93TW9yZUhhdHMpO1xyXG5zaG93TW9yZVNjYXJmcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlU2hvd01vcmVTY2FyZnMpO1xyXG5cclxubW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XHJcblx0Y29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG5cdG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbn0pO1xyXG5cclxuc2hvdzNhdFN0YXJ0KGhhdHNQcm9kdWN0cyk7XHJcbnNob3czYXRTdGFydChzY2FyZnNQcm9kdWN0cyk7XHJcblxyXG5zaG93V2hpY2hQcm9kdWN0KGhhdHNQcm9kdWN0cywgcHJvZHVjdHNIYXRzKTtcclxuc2hvd1doaWNoUHJvZHVjdChzY2FyZnNQcm9kdWN0cywgcHJvZHVjdHNTY2FyZnMpO1xyXG5cclxuIl19
